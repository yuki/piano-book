\documentclass[11pt,openany]{book}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\RequirePackage[a4paper,margin=0cm]{geometry}
\usepackage{graphicx}
\usepackage{fontspec}
\RequirePackage{svg} % for svg images
\svgsetup{inkscapepath=svgsubdir} %procesa los svg en su propia ruta, para mantener el proyecto ordenado
% \svgsetup{inkscapelatex=false} % don't treat text in svg as independent: https://tex.stackexchange.com/a/599018/305952
% \RequirePackage[export]{adjustbox} % for resizing svg images

% Specify section names explicitly in \titleformat with #1
%    newparttoc, % Required for writing the part toc entry number in a standard way (overriding default LaTeX behavior) so the titletoc package can style it
\RequirePackage[explicit]{titlesec}
\RequirePackage{tikz}

\newcommand{\outputpartpage}[1]{
    \thispagestyle{empty}
    \begin{center}
        \IfFileExists{#1/logo.svg}{%
            \includesvg[width=0.6\textwidth]{#1/logo.svg}%
        }{%
            \Huge\sffamily\bfseries #1%
        }%
    \end{center}
}

\titleformat{\part}
  [block]
  {\outputpartpage{#1}}
  {}
  {0pt}
  {}


%--------------------------------------------------------------------------
% Links
%--------------------------------------------------------------------------
\RequirePackage[final,linktoc=all]{hyperref}
\urlstyle{same}
\hypersetup{
    colorlinks=true,
    allcolors=black,
    bookmarks=true,
    bookmarksopen=true
}


%--------------------------------------------------------------------------
% TOC
%--------------------------------------------------------------------------
\RequirePackage{titletoc}

\makeatletter
\renewcommand\tableofcontents{
  \begingroup
    \hypersetup{hidelinks} % hide links in TOC, too much blue in it
    %\chapter*{\contentsname}
    \setlength{\parskip}{0em}
    \@starttoc{toc}
    \setlength{\parskip}{1.2em}
  \endgroup
  \clearpage
}
\makeatother

% inspired by https://www.latextemplates.com/template/the-legrand-orange-book
% Styling of unnumbered parts in the table of contents
\newcommand{\tocentrypartunnumbered}[1]{%
    \setlength\fboxsep{0pt}% Remove box padding
    \contentslabel[%
    % Part title box
    \colorbox{black}{% Background color
        \strut\parbox[c][1cm]{\linewidth}{% Box size
            \centering\Large\sffamily #1% Part title
        }%
    }%
    ]{1.25cm}
}

\titlecontents{part} % Section type being modified
  [1.25cm] % Left indentation
  {\addvspace{20pt}\color{white}\Large\sffamily\bfseries\hypersetup{linkcolor=white}} % Before code
  {} % Formatting of numbered sections of this type
  {\tocentrypartunnumbered} % Formatting of numberless sections of this type
  {} % Formatting of the filler to the right of the heading and the page number
  [] % After code


% para la portada, con texto encima de la imagen
% #1 → ruta del svg
% #2 → texto
% #3 → año
\newcommand{\cover}[3]{%
    \clearpage
    \thispagestyle{empty}
    \begin{tikzpicture}[remember picture,overlay]
        \node[anchor=center] at (current page.center)
            {\includesvg[width=\paperwidth,height=\paperheight]{#1}};
        \node[
            anchor=center,
            align=center,
            yshift=-2cm
        ] at (current page.center)
        {
            {\color{white}\bfseries\fontsize{40pt}{0pt}\selectfont #2}\\[0.5cm]
            {\color{white}\bfseries\fontsize{15pt}{0pt}\selectfont #3}
        };
    \end{tikzpicture}
    \clearpage
}



\begin{document}
    \cover
        {\detokenize{piano_cover.svg}}
        {Partituras para piano}
        {(2026)}

    \newgeometry{margin=2cm}
    
    \tableofcontents

    \newgeometry{margin=0cm}
    
    \input{estructura.tex}
\end{document}